#!/bin/bash
# ██████╗  ██████╗ ████████╗███████╗███████╗████████╗██╗   ██╗██████╗
# ██╔══██╗██╔═══██╗╚══██╔══╝██╔════╝██╔════╝╚══██╔══╝██║   ██║██╔══██╗
# ██║  ██║██║   ██║   ██║   ███████╗█████╗     ██║   ██║   ██║██████╔╝
# ██║  ██║██║   ██║   ██║   ╚════██║██╔══╝     ██║   ██║   ██║██╔═══╝
# ██████╔╝╚██████╔╝   ██║   ███████║███████╗   ██║   ╚██████╔╝██║
# ╚═════╝  ╚═════╝    ╚═╝   ╚══════╝╚══════╝   ╚═╝    ╚═════╝ ╚═╝

set -e

if ! command -v brew &> /dev/null; then
  exit 0
fi

cat << EOF
┌┬┐┌─┐┌─┐
│││├─┤│
┴ ┴┴ ┴└─┘
EOF

# Core Taps
brew install \
  asdf \
  aws-cdk \
  awscli \
  bat \
  claude-code \
  codex \
  cowsay \
  ctags \
  ctop \
  ddgr \
  dfu-programmer \
  dfu-util \
  diff-so-fancy \
  direnv \
  docker \
  dry \
  fd \
  ffmpeg \
  figlet \
  fortune \
  fswatch \
  fzf \
  gemini-cli \
  gh \
  git \
  gnupg \
  go \
  gradle \
  htop \
  httpie \
  ifstat \
  imagemagick \
  jo \
  jpeg-xl \
  jq \
  jump \
  kafka \
  killport \
  kotlin \
  kotlin-language-server \
  ktlint \
  lazygit \
  lolcat \
  neovim \
  nmap \
  node \
  pinentry \
  pinentry-mac \
  poetry \
  pyenv \
  pyenv-virtualenv \
  python \
  reattach-to-user-namespace \
  ripgrep \
  ruby \
  shortcat \
  showkey \
  solargraph \
  sqlc \
  starship \
  stow \
  the_silver_searcher \
  tig \
  tldr \
  tmux \
  tmuxinator \
  tree \
  tree-sitter \
  tree-sitter-cli \
  typescript \
  unbound \
  urlview \
  vim \
  virtualenv \
  wallpaper \
  watch \
  wget \
  zsh

# Third-party Taps
brew install \
  common-fate/granted/granted \
  f1bonacc1/tap/process-compose \
  felixkratz/formulae/borders \
  felixkratz/formulae/sketchybar \
  koekeishiya/formulae/skhd

# Core Casks
brew install --cask \
  1password-cli \
  alacritty \
  alfred \
  chromedriver \
  font-fira-code \
  font-fira-code-nerd-font \
  font-hack-nerd-font \
  font-jetbrains-mono \
  font-jetbrains-mono-nerd-font \
  font-roboto \
  font-roboto-mono \
  font-roboto-mono-nerd-font \
  fork \
  gifox \
  github \
  gcloud-cli \
  itsycal \
  jetbrains-toolbox \
  monodraw \
  orbstack \
  postico \
  postman \
  qmk-toolbox \
  session-manager-plugin \
  visual-studio-code \
  yubico-yubikey-manager

# Third-party Casks
brew install --cask \
  nikitabobko/tap/aerospace

# Installing Nix
# https://nix.dev/install-nix#install-nix
curl -L https://nixos.org/nix/install | sh

# Installing Devbox
# https://www.jetify.com/docs/devbox/installing_devbox
curl -fsSL https://get.jetify.com/devbox | bash

# Profile-specific installations
if [[ "$PROFILE" == "CLTRMP" ]]; then
  brew tap cultureamp/tap

  # https://github.com/cultureamp/silk
  brew install silk-cli

  # https://github.com/cultureamp/wilma
  brew install wilma

  # https://github.com/cultureamp/hotel
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/cultureamp/devbox-extras/main/scripts/github_auth.rb)"
  hotel setup ensure
fi
